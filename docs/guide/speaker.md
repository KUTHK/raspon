# スピーカー制御
## 音階と波の関係

音は空気の振動（波）として伝わります。音階（ドレミなど）は、波の振動数（周波数）によって決まります。例えば「ド（C4）」は約261.6Hzの周波数を持ちます。

## PWMによるスピーカー制御

PWM（パルス幅変調）は、デジタル信号でアナログ的な出力を実現する方法です。スピーカーにPWM信号を送ることで、特定の周波数の音を鳴らすことができます。

### 仕組み

1. **周波数の設定**
    鳴らしたい音階の周波数に合わせて、PWM信号の周期を決めます。

2. **デューティ比の調整**
    デューティ比（ON/OFFの割合）を調整することで、音量や音質を変えることができます。

3. **スピーカーへの出力**
    マイコンなどからPWM信号をスピーカーに出力すると、スピーカーがその周波数で振動し、音が鳴ります。

### 例：C言語でのPWM制御（疑似コード）

```c
// 例: 1kHzの音を鳴らす
int freq = 1000;
int period = 1000000 / freq; // マイクロ秒単位
while (playing) {
     digitalWrite(SPEAKER_PIN, HIGH);
     delayMicroseconds(period / 2);
     digitalWrite(SPEAKER_PIN, LOW);
     delayMicroseconds(period / 2);
}
```

このように、PWMを使うことで様々な音階の音をスピーカーから鳴らすことができます。